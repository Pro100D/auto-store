{"version":3,"file":"static/js/225.81d706da.chunk.js","mappings":"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","sources":["pages/CatalogPage/Catalog.styled.jsx","api/fetchCars.js","pages/CatalogPage/CatalogPage.jsx"],"sourcesContent":["import styled from '@emotion/styled';\r\nimport { theme } from 'styles/idnex';\r\n\r\nexport const CatalogSection = styled.section`\r\n  width: 1184px;\r\n  padding-top: 50px;\r\n  padding-bottom: 50px;\r\n  margin: 0 auto;\r\n`;\r\n\r\nexport const LoadMoreBtn = styled.button`\r\n  display: block;\r\n\r\n  color: ${theme.colors.mainColor};\r\n\r\n  font-size: 16px;\r\n\r\n  line-height: calc(24 / 16);\r\n  text-decoration-line: underline;\r\n\r\n  background-color: transparent;\r\n  border: none;\r\n\r\n  margin: 0 auto;\r\n\r\n  cursor: pointer;\r\n\r\n  &:hover,\r\n  &:focus {\r\n    color: ${theme.colors.activeColor};\r\n  }\r\n`;\r\n","import axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://6501e33d736d26322f5c706e.mockapi.io';\r\n\r\nexport const fetchCars = async (page = 1) => {\r\n  try {\r\n    const params = {\r\n      page,\r\n      limit: 8,\r\n    };\r\n    const res = await axios.get('/cars', { params });\r\n    return res.data;\r\n  } catch (error) {\r\n    console.error(error);\r\n    return [];\r\n  }\r\n};\r\n","import { fetchCars } from 'api/fetchCars';\r\nimport { CarsList, EmptyAndError } from 'components';\r\nimport { useEffect, useState } from 'react';\r\nimport { CatalogSection, LoadMoreBtn } from './Catalog.styled';\r\n\r\nconst CatalogPage = () => {\r\n  const [cars, setCars] = useState([]);\r\n  const [favorites, setFavorite] = useState(\r\n    () => JSON.parse(localStorage.getItem('favorites')) ?? []\r\n  );\r\n  const [page, setPage] = useState(2);\r\n\r\n  const loadMoreBtn = async () => {\r\n    setPage(prevState => prevState + 1);\r\n\r\n    const currentCars = await fetchCars(page);\r\n\r\n    setCars(prevState => [...prevState, ...currentCars]);\r\n  };\r\n\r\n  const addToFavorite = car => {\r\n    setFavorite(prevState => [...prevState, car]);\r\n  };\r\n\r\n  const removeFavorite = car => {\r\n    const itFavoriteCar = favorites.findIndex(carFind => carFind.id === car.id);\r\n\r\n    if (itFavoriteCar !== -1) {\r\n      const localStorageFavorite = JSON.parse(\r\n        localStorage.getItem('favorites')\r\n      );\r\n      const filter = localStorageFavorite.splice(itFavoriteCar, 1);\r\n\r\n      setFavorite(prevState =>\r\n        prevState.filter(value => value.id !== filter[0].id)\r\n      );\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    (async () => {\r\n      setCars(await fetchCars(1));\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const jsonFavorite = JSON.stringify(favorites);\r\n    localStorage.setItem('favorites', jsonFavorite);\r\n  }, [favorites]);\r\n\r\n  return cars.length !== 0 ? (\r\n    <CatalogSection>\r\n      <CarsList\r\n        cars={cars}\r\n        addFavorite={addToFavorite}\r\n        removeFavorite={removeFavorite}\r\n        favorites={favorites}\r\n      />\r\n      {cars.length < 32 && (\r\n        <LoadMoreBtn type=\"button\" onClick={loadMoreBtn}>\r\n          Load more\r\n        </LoadMoreBtn>\r\n      )}\r\n    </CatalogSection>\r\n  ) : (\r\n    <EmptyAndError title={'Sorry, there was an error, try again later'} />\r\n  );\r\n};\r\nexport default CatalogPage;\r\n"],"names":["CatalogSection","styled","section","_templateObject","_taggedTemplateLiteral","LoadMoreBtn","button","_templateObject2","theme","colors","mainColor","activeColor","axios","defaults","baseURL","fetchCars","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","page","params","res","_args","arguments","wrap","_context","prev","next","length","undefined","limit","get","sent","abrupt","data","t0","console","error","stop","apply","_useState","useState","_useState2","_slicedToArray","cars","setCars","_useState3","_JSON$parse","JSON","parse","localStorage","getItem","_useState4","favorites","setFavorite","_useState5","_useState6","setPage","useEffect","_callee2","_context2","t1","jsonFavorite","stringify","setItem","_jsxs","children","_jsx","CarsList","addFavorite","car","prevState","concat","_toConsumableArray","removeFavorite","itFavoriteCar","findIndex","carFind","id","filter","splice","value","type","onClick","currentCars","EmptyAndError","title"],"sourceRoot":""}